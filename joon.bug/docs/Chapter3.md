# Chapter 3

## 영속성 컨텍스트 상태
- 비영속, 영속, 준영속, 삭제 상태를 가진다.
  - 영어로 보는게 의미가 더 직관적인 듯.
  - new/transit, managed, detached, removed
  - 비영속 보다 새로 생성되었다는 의미가 더 느낌있다
  - 영속보다 관리되고 있는 상태라는게 더 느낌있다. 영속성 컨텍스트에서 관리되는 상태
  - 준영속보다 영속성 컨텍스트에서 분리되었다고 보는게 더 느낌 있다
  - removed는 그냥 비슷한듯

## 영속성 컨텍스트
- id 기준으로 관리되는 map 같은거
- 캐시역할도 함
- flush 로 db 저장
- 동일성 보장(== 비교 가능)
- 변경 감지
- 지연 로딩

## 개인 생각 그냥 쓰는 곳
- save를 통해 한번에 커밋할 수 있으면 트랜잭셔널 어노테이션이나 이런거 사용할 필요도 없지 않은 거 아닌가 근데 그냥 트랜잭셔널 쓰는게 더 편할거 같기도 하고
- update 쿼리 여러개 작성 안하고 sql 누락 안할 수 있는거는 장점인 듯 은근 많이 까먹어서 재작업했었다
- 내부적으로는 모든 컬럼 업데이트 방식을 채택했는데 ai 를 사용할 수 있는 현 시점에서 jpa가 마스터 키는 아닌듯
- 최적화에 항상 신경쓰기 vs 쿼리 쓰기 에서 비용효율적인 거 채택하면 되지 않을까